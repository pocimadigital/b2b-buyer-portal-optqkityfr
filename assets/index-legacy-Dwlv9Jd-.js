System.register(["./mui-legacy-C2p10bcq.js","./reactVendor-legacy-CtYIj4Ma.js","./router-legacy-CCJEjNy7.js","./lang-legacy-DRIvecGC.js","./B3Card-legacy-BfBAJ0RA.js","./react-setup-legacy-CiLdZFVf.js","./b3Logger-legacy-C5y5ZQF8.js","../index-legacy.D-U_SIL6.js","./b3Login-legacy-CqziT8uI.js","./login-legacy-J8X9k7ot.js","./config-legacy-BDA8lWKp.js","./form-legacy-CAo5v63e.js","./B3CustomForm-legacy-Bk1hH9jz.js","./styled-legacy-B0Nq4zJy.js","./eReact-legacy-BRtOBtIF.js","./intl-legacy-DG3cM9-L.js","./eCache-legacy-BoIqTPuc.js","./eStyled-legacy-C5ZTaXoz.js","./redux-legacy-Dls004SH.js","./toolkit-legacy-6OFItfV5.js","./lodashEs-legacy-Da1qF4L1.js","./muiIcon-legacy-CrtdWcGA.js","./dateFns-legacy-DDX5L0UR.js","./dropzone-legacy-Q3dhxZki.js","./validatorRules-legacy-BrvWH46A.js"],(function(e,t){"use strict";var n,o,i,r,a,s,l,c,g,d,u,x,m,p,f,y,h,j,b,w,F,T,B,S,C,I,v,H,A,L,R,k,P,D,E,M,O,q,U,z,W,V,_,N,G,J,Y,Z;return{setters:[e=>{n=e.j,o=e.B,i=e.y,r=e.a0,a=e.I,s=e.T},e=>{l=e.r},e=>{c=e.u,g=e.d},e=>{d=e.u},e=>{u=e.B},e=>{x=e.a3,m=e.a,p=e.i,f=e.u,y=e.ar,h=e.G,j=e.C,b=e.as,w=e.a2,F=e.n,T=e.o,B=e.a5,S=e.at,C=e.au,I=e.av,v=e.aw,H=e.a8,A=e.a6,L=e.w,R=e.ag,k=e.ax,P=e.ay,D=e.x,E=e.az,M=e.aa,O=e.aA,q=e.aB},e=>{U=e.b},null,e=>{z=e.l},e=>{W=e.b,V=e.a},e=>{_=e.a,N=e.l},e=>{G=e.u},e=>{J=e.B},e=>{Y=e.a,Z=e.L},null,null,null,null,null,null,null,null,null,null,null],execute:function(){function t(e){const{html:t,sx:i}=e;return n.jsx(o,{sx:{...i},dangerouslySetInnerHTML:{__html:t}})}function $(e){const{loginBtn:t,handleLoginSubmit:i,gotoForgotPassword:r}=e,a=d(),{control:s,handleSubmit:l,getValues:c,formState:{errors:g},setValue:u}=G({mode:"onSubmit"}),m=e=>{i(e)},p=_(a,l(m));return n.jsx(o,{sx:{display:"flex",flexDirection:"column"},children:n.jsx(o,{sx:{width:"100%","& input":{bgcolor:"#F5F5F5",borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0"}},children:n.jsxs("form",{onSubmit:l(m),children:[n.jsx(J,{formFields:p,errors:g,control:s,getValues:c,setValue:u}),n.jsxs(o,{sx:{display:"flex",justifyContent:"flex-start ",alignItems:"center",mt:2},children:[n.jsx(x,{type:"submit",variant:"contained",sx:{borderRadius:"3.125rem",background:"#1B5F90",border:"1px solid #1B5F90",color:"#FFFFFF",textAlign:"center",fontFamily:"Montserrat",fontSize:"1rem",fontStyle:"normal",fontWeight:400,lineHeight:"normal",textTransform:"capitalize",letterSpacing:"0.02rem",padding:"0.7rem 1.75rem",":hover":{background:"#FFFFFF",color:"#1B5F90"}},children:t}),n.jsx(o,{sx:{cursor:"pointer",ml:2,textUnderlineOffset:"4px",color:"#474747",textAlign:"center",fontFamily:"Montserrat",fontSize:"0.9375rem",fontStyle:"normal",fontWeight:400,lineHeight:"normal"},onClick:()=>r(),children:a("login.loginText.forgotPasswordText")})]})]})})})}function K(e){const{handleSubmit:r,widgetBodyText:a,createAccountButtonText:s}=e,l=i(),[c]=m();return n.jsxs(o,{sx:{padding:c?"16px":"20px",borderRadius:"4px",mt:c?"0":"-25px"},children:[n.jsx(t,{sx:{minHeight:"250px","& .panel":{".panel-title":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontWeight:400,fontSize:"24px"}}},html:a}),n.jsx(o,{sx:{marginTop:"5px"},children:n.jsx(x,{type:"submit",onClick:r,variant:"contained",sx:{ml:c?0:1,backgroundColor:l.palette.primary.main},children:s})})]})}e("default",(function(e){const{isMasquerade:i,endMasquerade:x}=Q(),{setOpenPage:F}=e,T=p(),_=f(y),G=f((({quoteInfo:e})=>e.quoteDetailToCheckoutUrl)),[J,ee]=l.useState(!0),[te]=m(),[ne,oe]=l.useState(!0),[ie,re]=l.useState(""),[ae,se]=l.useState({emailAddress:"",password:""}),le=c(),ce=d(),[ge,de]=g(),{state:{isCheckout:ue,logo:xe,registerEnabled:me}}=l.useContext(h),{state:{loginPageButton:pe,loginPageDisplay:fe,loginPageHtml:ye,portalStyle:{backgroundColor:he="FEF9F5"}}}=l.useContext(j),{createAccountButtonText:je,primaryButtonColor:be,signInButtonText:we}=pe,{displayStoreLogo:Fe,pageTitle:Te}=fe,{bottomHtmlRegionEnabled:Be,bottomHtmlRegionHtml:Se,createAccountPanelHtml:Ce,topHtmlRegionEnabled:Ie,topHtmlRegionHtml:ve}=ye,He={loginTitle:Te||ce("login.button.signIn"),loginBtn:we||ce("login.button.signInUppercase"),createAccountButtonText:je||ce("login.button.createAccount"),btnColor:be||"",widgetHeadText:Ie?ve:void 0,widgetBodyText:Ce||b,widgetFooterText:Be?Se:void 0,logo:Fe?xe:void 0};l.useEffect((()=>{(async()=>{try{const e=ge.get("loginFlag"),t="false"!==ge.get("showTip");if(oe(t),e&&re(e),"7"===e&&B.error(ce("login.loginText.invoiceErrorTip")),"3"===e&&_){const e=await S();if(e.data.site.cart?.entityId){const t=C(e.data.site.cart.entityId);await I(t)}const t=await W();t.errors&&console.log(`LOGOUT INVALIDO: ${t.errors[0].message}`);const{result:n}=(await W()).data.logout;if("success"!==n)return;return i&&await x(),window.sessionStorage.clear(),v(),ee(!1),void window.location.reload()}ee(!1)}finally{ee(!1)}})()}),[ce,x,_,i,ge]);const Ae=(e,t="")=>{if(!e)return"";switch(e){case"1":return ce("login.loginTipInfo.resetPassword",{email:t});case"2":return ce("login.loginTipInfo.receivePassword");case"3":return ce("login.loginTipInfo.loggedOutLogin");case"4":return ce("login.loginTipInfo.accountincorrect");case"5":return ce("login.loginTipInfo.accountPrelaunch");case"6":return ce("login.loginText.deviceCrowdingLogIn");default:return""}},Le=async e=>{const t=await q(e);re(t?"1":"4")},Re=me?"100%":"50%",ke=me?"50%":"auto";return n.jsx(u,{setOpenPage:F,children:n.jsx(Y,{paddings:te?"0":"20px 20px",children:n.jsx(w,{isSpinning:J,tip:ce("global.tips.loading"),background:"transparent",children:n.jsx(o,{sx:{display:"flex",flexDirection:"column",width:"100%",minHeight:"400px",minWidth:"343px"},children:He&&n.jsxs(n.Fragment,{children:[G&&n.jsx(r,{severity:"error",variant:"outlined",children:ce("login.loginText.quoteDetailToCheckoutUrl")}),He.logo&&n.jsx(o,{sx:{margin:"20px 0",minHeight:"150px"},children:n.jsx(Z,{children:n.jsx(a,{sx:{maxWidth:te?"70%":"250px"},onClick:()=>{window.location.href="/"},children:n.jsx("img",{src:He.logo,alt:ce("login.registerLogo"),loading:"lazy"})})})}),ie&&ne&&n.jsx(o,{sx:{padding:te?0:"0 5%",margin:"10px 0 0 0"},children:Ae(ie,ae?.emailAddress)&&n.jsx(r,{severity:X(ie),variant:"outlined",children:Ae(ie,ae?.emailAddress||"")})}),He.widgetHeadText&&n.jsx(t,{sx:{minHeight:"48px",width:me||te?"100%":"50%"},html:He.widgetHeadText}),n.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[n.jsx(s,{variant:"h2",sx:{margin:"2rem 0",display:"flex",justifyContent:"center",alignItems:"center",color:"#474747",fontFamily:"Montserrat",fontStyle:"normal",fontWeight:400,lineHeight:"normal",fontSize:te?"1.625rem":"2.5rem",textAlign:te?"center":"initial"},children:ce("login.loginText.signInHeader")}),n.jsx(o,{sx:{bgcolor:"#FFFFFF",borderRadius:"4px",margin:"20px 0",display:"flex",flexDirection:"column",justifyContent:"center",width:te?"auto":Re},children:n.jsxs(o,{sx:{mb:"20px",display:"flex",flexDirection:te?"column":"row",justifyContent:"center",alignItems:"center",padding:"0 40px",width:te?"auto":"100%",gap:te?"20px":"0"},children:[n.jsx(o,{sx:{width:te?"auto":ke,paddingRight:te?0:"2%",ml:"16px",mr:te?"16px":"",pb:me?"":"36px"},children:n.jsx($,{loginBtn:He.loginBtn,gotoForgotPassword:()=>{le("/forgotpassword")},handleLoginSubmit:async e=>{if(ee(!0),se(e),de((e=>(e.delete("loginFlag"),e))),ue)try{await N(e),window.location.reload()}catch(t){U.error(t),Le(e.emailAddress)}else try{const t={email:e.emailAddress,password:e.password,storeHash:H,channelId:A},{login:{result:{token:n,storefrontLoginToken:o,permissions:i},errors:r}}=await V({loginData:t});if(T(L(n)),R.dispatch(k(i)),P(o),r?.[0]||!n){if(r?.[0]){const{message:e}=r[0];if("Operation cannot be performed as the storefront channel is not live"===e)return re("5"),void ee(!1)}Le(e.emailAddress)}else{const e=await D(n);if(G)return void le(G);if(e?.userType===E.MULTIPLE_B2C&&e?.role===M.SUPER_ADMIN)return void le("/dashboard");if(!z(le))return;const{getShoppingListPermission:t,getOrderPermission:o}=O();if(e?.role===M.JUNIOR_BUYER&&"Junior Buyer"===e?.companyRoleName)le(t?"/shoppingLists":"/accountSettings");else{let n=o?"/orders":"/shoppingLists";n=t||o?n:"/accountSettings",n=e?.userType===E.B2C?"/orders":n,le(n)}}}catch(t){B.error(ce("login.loginTipInfo.accountincorrect"))}finally{ee(!1)}},backgroundColor:he})}),me&&n.jsx(o,{sx:{flex:"1",background:"#F6F6F6",borderRadius:"0.625rem",padding:te?"1rem 1.5rem 1rem 1.5rem":"1rem 3rem 2rem 3rem"},children:n.jsx(K,{createAccountButtonText:He.createAccountButtonText,widgetBodyText:He.widgetBodyText,handleSubmit:()=>{le("/register")}})})]})})]}),He.widgetFooterText&&n.jsx(t,{sx:{minHeight:"48px",width:me||te?"100%":"50%"},html:He.widgetFooterText})]})})})})})}));const Q=()=>{const e=f((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),t=f((({company:e})=>e.customer.b2bId)),n=f((({b2bFeatures:e})=>e.masqueradeCompany.id)),o=p(),i=e&&"number"==typeof t;return{endMasquerade:l.useCallback((async()=>{i&&(await F(+n,t),o(T()))}),[t,i,n,o]),isMasquerade:i}},X=e=>{if(e)switch(e){case"1":case"4":return"error";case"5":return"warning";default:return"success"}}}}}));
