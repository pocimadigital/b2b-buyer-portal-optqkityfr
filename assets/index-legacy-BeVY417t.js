System.register(["./mui-legacy-C2p10bcq.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-CyIWukAl.js","./B3Card-legacy-D4g6vQpH.js","./react-setup-legacy-CGLBS7w3.js","./b3Logger-legacy-C5y5ZQF8.js","../index-legacy.BY4IMDhs.js","./b3Login-legacy-CvhxoCuq.js","./login-legacy-BGKlkSvp.js","./config-legacy-DKbL6BsW.js","./config-legacy-e0Bh8_p_.js","./eStyled-legacy-C5ZTaXoz.js","./form-legacy-CAo5v63e.js","./B3CustomForm-legacy-BOGgqcIR.js","./RegisteredFinish-legacy-C8g7EDxQ.js","./recaptcha-legacy-B1kfY4rM.js","./users-legacy-DELuPAGK.js","./lodashEs-legacy-Da1qF4L1.js","./router-legacy-CCJEjNy7.js","./eReact-legacy-BRtOBtIF.js","./intl-legacy-DG3cM9-L.js","./eCache-legacy-BoIqTPuc.js","./redux-legacy-Dls004SH.js","./toolkit-legacy-6OFItfV5.js","./muiIcon-legacy-CrtdWcGA.js","./dateFns-legacy-DDX5L0UR.js","./dropzone-legacy-Q3dhxZki.js","./validatorRules-legacy-CcaP9f-8.js"],(function(e,t){"use strict";var a,o,n,i,s,r,l,c,d,u,m,f,p,g,h,y,x,b,j,w,I,F,S,_,C,M,v,k,B,T,E,L,A,N,R,V,P,z,O,H,W,q,$,G,K,U,D,X,Y,Z,J,Q,ee,te,ae,oe,ne,ie,se,re,le,ce,de,ue,me;return{setters:[e=>{a=e.j,o=e.B,n=e.a0,i=e.T,s=e.v,r=e.ai,l=e.w,c=e.aj,d=e.y,u=e.ak,m=e.al,f=e.am,p=e.I},e=>{g=e.r},e=>{h=e.u},e=>{y=e.B},e=>{x=e.bq,b=e.G,j=e.C,w=e.k,I=e.a6,F=e.a8,S=e.br,_=e.bm,C=e.u,M=e.bs,v=e.a,k=e.W,B=e.N,T=e.bt,E=e.a2,L=e.a4,A=e.ac,N=e.x},e=>{R=e.b},null,e=>{V=e.l},e=>{P=e.c},e=>{z=e.l},e=>{O=e.d,H=e.t,W=e.B,q=e.e,$=e.s,G=e.b,K=e.g,U=e.c},e=>{D=e.n},e=>{X=e.u},e=>{Y=e.B},e=>{Z=e.T,J=e.R,Q=e.c,ee=e.s,te=e.I,ae=e.v,oe=e.a,ne=e.b,ie=e.d,se=e.e},e=>{re=e.C,le=e.g},e=>{ce=e.a,de=e.c},e=>{ue=e.i},e=>{me=e.u},null,null,null,null,null,null,null,null,null],execute:function(){function t(e){const t=h(),{handleBack:s,activeStep:r,handleNext:l}=e,[c,d]=g.useState([]),[u,m]=g.useState(""),[f,p]=g.useState(""),[y,C]=g.useState(""),[M,v]=g.useState(!1),[k,B]=g.useState(""),[T,E]=g.useState(!1);g.useEffect((()=>{(async()=>{try{const e=await le();e&&(v(e.isEnabledOnStorefront),B(e.siteKey))}catch(e){R.error(e)}})()}),[]),g.useEffect((()=>{y&&E(!1)}),[y]);const{control:L,handleSubmit:A,setError:N,formState:{errors:V}}=X({mode:"all"}),{state:P,dispatch:z}=g.useContext(x),{state:{blockPendingAccountOrderCreation:W}}=g.useContext(b),{state:{portalStyle:{backgroundColor:q="#FEF9F5"}}}=g.useContext(j),$=w(q),{contactInformation:G,bcContactInformation:K,passwordInformation:U=[],bcPasswordInformation:D=[],accountType:te,additionalInformation:ae,bcAdditionalInformation:oe,addressBasicFields:ne=[],bcAddressBasicFields:ie=[],companyInformation:se=[],emailMarketingNewsletter:ce}=P,de="1"===te?G:K,ue="1"===te?U:D,me="1"===te?ae:oe,fe="1"===te?ne:ie;g.useEffect((()=>{if(te){if(de&&de.length){const e=de.find((e=>"email"===e.name))||{};p(e?.default||"")}d(ue)}}),[G,K,te,de,ue]);const pe=e=>{const t={};if(t.authentication={force_password_reset:!1,new_password:e.password},t.accepts_product_review_abandoned_cart_emails=ce,de&&(de.forEach((e=>{const a=O(e.name);"accepts_marketing_emails"===a?t.accepts_product_review_abandoned_cart_emails=!!e?.default?.length:e.custom||(t[a]=e?.default||"")})),t.form_fields=[],me&&me.length&&me.forEach((e=>{t.form_fields.push({name:e.bcLabel,value:e.default})}))),t.addresses=[],t.origin_channel_id=I,t.channel_ids=[I],"2"===te){const e={},a=fe.filter((e=>!e.custom)),o=fe.filter((e=>e.custom));a&&(t.addresses={},a.forEach((t=>{"country"===t.name?e.country_code=t.default:"state"===t.name?e.state_or_province=t.default:"postalCode"===t.name?e.postal_code=t.default:"firstName"===t.name?e.first_name=t.default:"lastName"===t.name?e.last_name=t.default:e[t.name]=t.default}))),e.form_fields=[],o&&o.length&&o.forEach((t=>{e.form_fields.push({name:t.bcLabel,value:t.default})})),t.addresses=[e],t.trigger_account_created_notification=!0}const a={storeHash:F,...t};return Q(a)};return a.jsxs(o,{sx:{pl:1,pr:1,mt:2,width:"100%","& h4":{color:$},"& input, & .MuiFormControl-root .MuiTextField-root":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",padding:"10px !important"}},children:[u&&a.jsx(n,{severity:"error",children:a.jsx(Z,{children:u})}),a.jsxs(o,{children:[c&&a.jsxs(a.Fragment,{children:[f.length>0&&a.jsx(o,{sx:{fontSize:"16px",fontWeight:400,color:"#000000",marginBottom:"10px",marginTop:"-12px",wordWrap:"break-word",textAlign:"center"},children:`Ahora por favor crea una contraseÃ±a para tu cuenta: ${f}`}),a.jsx(Y,{formFields:c,errors:V,control:L})]}),T?a.jsx(i,{variant:"body1",sx:{display:"flex",alignSelf:"flex-start",marginLeft:"8px",marginTop:"2px",fontSize:"13px"},children:t("login.loginText.missingCaptcha")}):"",M?a.jsx(o,{sx:{display:"flex",justifyContent:"center",marginTop:"20px"},children:a.jsx(re,{siteKey:k,size:"normal",handleGetKey:e=>C(e)})}):""]}),a.jsx(J,{handleBack:s,activeStep:r,handleNext:e=>{A((async e=>{if(e.password!==e.confirmPassword)return N("confirmPassword",{type:"manual",message:t("global.registerComplete.passwordMatchPrompt")}),void N("password",{type:"manual",message:t("global.registerComplete.passwordMatchPrompt")});if(!M||y){if(!T)try{z({type:"loading",payload:{isLoading:!0}});let a=!0;if("2"===te)await pe(e);else{const o=se.filter((e=>"files"===e.fieldType)),n=await(async e=>{let a=[];if(e.length){e.forEach((e=>{a=e.default}));try{return(await Promise.all(a.map((e=>_({file:e,type:"companyAttachedFile"}))))).reduce(((e,a)=>{let o=e;if(200!==a.code)throw a.data.errMsg||a.message||t("intl.global.fileUpload.fileUploadFailure");{const t={...a.data};t.fileSize=t.fileSize?`${t.fileSize}`:"",o=[...e,t]}return o}),[])}catch(o){throw R.error(o),o}}})(o||[]),i=await pe(e),{data:s}=i,r=await(async(e,t,a)=>{try{const e={};e.customerId=t||"",e.storeHash=F;const o=(de||[]).filter((e=>!!e.custom));if(o.length){const t=[];o.forEach((e=>{const a={};a.fieldName=O(e.name),a.fieldValue=e?.default||"",t.push(a)})),e.userExtraFields=t}const n=se.filter((e=>!e.custom&&"files"!==e.fieldType)),i=se.filter((e=>!!e.custom));if(n.length&&n.forEach((t=>{e[H(O(t.name))]=t?.default||""})),i.length){const t=[];i.forEach((e=>{const a={};a.fieldName=O(e.name),a.fieldValue=e?.default||"",t.push(a)})),e.extraFields=t}const s=fe.filter((e=>!e.custom))||[],r=fe.filter((e=>!!e.custom))||[];if(s.length&&s.forEach((t=>{const a=O(t.name);"address1"===a&&(e.addressLine1=t.default),"address2"===a&&(e.addressLine2=t.default),e[a]=t.default})),r.length){const t=[];r.forEach((e=>{const a={};a.fieldName=O(e.name),a.fieldValue=e?.default||"",t.push(a)})),e.addressExtraFields=t}return e.fileList=a,e.channelId=I,await S(e)}catch(o){R.error(o)}})(0,s.id,n);a=1==+(r?.companyCreate?.company?.companyStatus||"")}z({type:"finishInfo",payload:{submitSuccess:!0,isAutoApproval:a,blockPendingAccountOrderCreation:W}}),(e=>{const t=U.map((t=>("1"===te&&(t.default=e[t.name]||t.default),t))),a=D.map((t=>("2"===te&&(t.default=e[t.name]||t.default),t)));z({type:"all",payload:{passwordInformation:t,bcPasswordInformation:a}})})(e),await(async()=>{if(de&&de.length>0){const t=de.find((e=>"field_email_marketing_newsletter"===e.fieldId&&"checkbox"===e.fieldType)),a=de.find((e=>"field_first_name"===e.fieldId))||{},o=de.find((e=>"field_last_name"===e.fieldId))||{};if(t?.isChecked&&(t?.default||[]).length>0)try{await ee({storeHash:F,email:f,first_name:a.default,last_name:o.default,channel_id:I||1})}catch(e){m(e?.message||e)}}})(),l()}catch(a){m(a?.message||a)}finally{z({type:"loading",payload:{isLoading:!1}})}}else E(!0)}))(e)},email:f})]})}function fe(e){const{handleBack:t,handleNext:i,activeStep:d}=e,{state:u,dispatch:m}=g.useContext(x),f=C(M),{state:{accountLoginRegistration:p,portalStyle:{backgroundColor:y="#FEF9F5"}}}=g.useContext(j),b=w(y),F=h(),[S]=v(),[_,B]=g.useState(""),{contactInformation:T,accountType:E,additionalInformation:L,bcContactInformation:A,bcAdditionalInformation:N}=u,{control:V,handleSubmit:P,getValues:z,formState:{errors:O},setError:H,setValue:$}=X({mode:"onSubmit"}),G="1"===E?"additionalInformation":"bcAdditionalInformation",K="1"===E?L||[]:N||[],U=T?.map((e=>{const t=e;return"field_email"===e.fieldId&&"1"===E&&(t.isTip=!1),e})),D="1"===E?U:A||[],Q="1"===E?"contactInformation":"bcContactInformationFields",ee=K.length?K[0]?.groupName:"",oe=(e=!1)=>{m({type:"loading",payload:{isLoading:e}})},ne=T?.find((e=>"field_email"===e.fieldId))?.name||"email";return a.jsxs(o,{sx:{pl:1,pr:1,mt:2,width:"100%"},children:[_&&a.jsx(n,{severity:"error",children:a.jsx(Z,{children:_})}),a.jsx(o,{component:"div",sx:{color:"#000000",fontFamily:"Montserrat",fontStyle:"normal",fontWeight:400,lineHeight:"normal",fontSize:S?"0.875rem":"1rem",textAlign:S?"center":"center ",padding:"0px 15px"},dangerouslySetInnerHTML:{__html:F("register.step.account.customText")}}),a.jsx(s,{sx:{"& h4":{color:b}},children:a.jsxs(r,{"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:E,onChange:e=>{m({type:"accountType",payload:{accountType:e.target.value}})},sx:{display:"none","& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label":{color:k(b,.87)},"& .MuiButtonBase-root.MuiRadio-root.MuiRadio-colorPrimary:not(.Mui-checked)":{color:k(b,.6)}},children:[p.b2b&&a.jsx(l,{value:"1",control:a.jsx(c,{}),label:F("register.registeredAccount.businessAccount")}),p.b2c&&a.jsx(l,{value:"2",control:a.jsx(c,{}),label:F("register.registeredAccount.personalAccount")})]})}),a.jsx(o,{sx:{"& h4":{color:b},"& input, & .MuiFormControl-root .MuiTextField-root, & .MuiTextField-root .MuiInputBase-multiline":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",padding:"10px !important"},"& .MuiButtonBase-root.MuiCheckbox-root.MuiCheckbox-colorPrimary:not(.Mui-checked)":{color:k(b,.6)},"& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label":{color:k(b,.87)}},children:a.jsx(Y,{formFields:D,errors:O,control:V,getValues:z,setValue:$})}),a.jsx(o,{}),K&&K.length?a.jsxs(o,{sx:{"& h4":{color:b},"& .MuiFormControlLabel-label, & .MuiFormControl-root .MuiFormLabel-root:not(.Mui-focused)":{color:k(b,.87)},"& .MuiRadio-root:not(.Mui-checked)":{color:k(b,.6)}},children:[a.jsx(te,{children:ee}),a.jsx(Y,{formFields:K,errors:O,control:V,getValues:z,setValue:$})]}):"",a.jsx(J,{activeStep:d,handleBack:t,handleNext:async e=>{P((async e=>{if(!(await(async e=>{const t="1"===E;try{oe(!0);const{isValid:a,userType:o,userInfo:{companyName:n=""}={}}=t?await ce({email:e,channelId:I}):await de({email:e,channelId:I});return a?B(""):(B(F(q[o],{companyName:n||"",email:e})),H(ne,{type:"custom",message:""}),f?.body.scrollIntoView(!0)),a}catch(a){return!1}finally{oe(!1)}})(e[ne])))return;const t=D.map((t=>{const a=t;return a.default=e[t.name]||t.default,"field_email_marketing_newsletter"===t.fieldId&&"checkbox"===t.fieldType&&(a.isChecked=e[t.name].length>0),t}));try{if(oe(!0),"1"===E){const a=t.filter((e=>!!e.custom)),o=a.map((t=>({fieldName:W.decode(t.name),fieldValue:e[t.name]||t.default})));if(o.length>0){const e=await ae({extraFields:o});if(200!==e.code){const t=e.data?.errMsg||e.message||"",o=t.split(":");if(o.length>=2){const e=a.find((e=>W.decode(e.name)===o[0]));if(e)return H(e.name,{type:"manual",message:o[1]}),void oe(!1)}return B(t),void oe(!1)}}B("")}}catch(o){R.error(o)}finally{oe(!1)}let a=[];K&&(a=K.map((t=>(t.default=e[t.name]||t.default,t)))),m({type:"all",payload:{[G]:[...a],[Q]:[...t]}}),i()}))(e)}})]})}function pe(e){const t=h(),[i]=v(),{handleBack:s,handleNext:r,activeStep:l}=e,{state:c,dispatch:d}=g.useContext(x),u=c.contactInformation||[],m=c.companyInformation||[],f=`${u.find((e=>"field_first_name"===e.fieldId))?.default||""} ${u.find((e=>"field_last_name"===e.fieldId))?.default||""}`.trim(),p=m.find((e=>"field_company_name"===e.fieldId));p&&(p.default=f);const y=u.find((e=>"field_email"===e.fieldId))?.default||"",b=m.find((e=>"field_company_email"===e.fieldId));b&&(b.default=y);const I=u.find((e=>"field_phone_number"===e.fieldId))?.default||"",F=m.find((e=>"field_company_phone_number"===e.fieldId));F&&(F.default=I);const S=u.find((e=>"CÃ©dula profesional"===e.label))?.default||"",_=m.find((e=>"CÃ©dula profesional"===e.label));_&&(_.default=S);const C=new URLSearchParams(window.location.search).get("utm_source")||"",M=u.find((e=>"utm_source"===e.label));M&&(M.default=C);const{state:{portalStyle:{backgroundColor:k="#FEF9F5"}}}=g.useContext(j),B=w(k),[T,E]=g.useState(""),{accountType:L="1",companyInformation:A=[],companyAttachment:N=[],addressBasicFields:R=[],bcAddressBasicFields:V=[],countryList:P=[]}=c,{control:z,handleSubmit:O,getValues:H,formState:{errors:q},setValue:$,watch:G,setError:K}=X({mode:"all"}),U="1"===L?A[0]?.groupName:"",D="1"===L?"addressBasicFields":"bcAddressBasicFields",Q="1"===L?R:V,ee=Q[0]?.groupName||"",ae=g.useCallback(((e,t="")=>{const a=P.find((t=>t.countryCode===e||t.countryName===e))?.states||[],o=Q.find((e=>"state"===e.name));o&&(a.length>0?(o.fieldType="dropdown",o.options=a):(o.fieldType="text",o.options=[])),$("state",t&&e&&(a.find((e=>e.stateName===t))||0===a.length)?t:""),d({type:"stateList",payload:{stateList:a,addressBasicFields:R,bcAddressBasicFields:V,[D]:[...Q]}})}),[R,Q,D,V,P]);g.useEffect((()=>{const e=H("country"),t=H("state");ae(e,t)}),[]),g.useEffect((()=>{const e=G(((e,{name:t,type:a})=>{const{country:o,state:n}=e;"country"===t&&"change"===a&&ae(o,n)}));return()=>e.unsubscribe()}),[P,ae]);const ne=(e=!1)=>{d({type:"loading",payload:{isLoading:e}})},ie=(e,t)=>e.map((e=>(e.default=t[e.name]||e.default,e))),se=()=>{const e=[...A,...N,...Q].reduce(((e,t)=>(e[t.name]=H(t.name)||t.default,e)),{}),t=ie(A,e),a=ie(N,e),o=ie(Q,e);d({type:"all",payload:{companyInformation:[...t],companyAttachment:[...a],[D]:[...o]}})};return a.jsxs(o,{sx:{pl:1,pr:1,mt:2,width:"100%","& h4":{color:B},"& input, & .MuiFormControl-root .MuiTextField-root, & .MuiDropzoneArea-textContainer, & .MuiSelect-select.MuiSelect-outlined, & .MuiTextField-root .MuiInputBase-multiline":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",padding:"10px !important"}},children:[T&&a.jsx(n,{severity:"error",children:a.jsx(Z,{children:T})}),a.jsx(o,{component:"div",sx:{color:"#000000",fontFamily:"Montserrat",fontStyle:"normal",fontWeight:400,lineHeight:"normal",fontSize:i?"0.875rem":"1rem",textAlign:i?"center":"center ",padding:"0px 15px"},dangerouslySetInnerHTML:{__html:t("register.step.details.customText")}}),"1"===L?a.jsxs(o,{sx:{display:"none !important"},children:[a.jsx(te,{children:U}),a.jsx(Y,{formFields:[...A],errors:q,control:z,getValues:H,setValue:$,setError:K})]}):null,a.jsxs(o,{children:[a.jsx(te,{children:ee}),a.jsx(Y,{formFields:Q,errors:q,control:z,getValues:H,setValue:$})]}),a.jsx(J,{handleBack:()=>{se(),s()},handleNext:e=>{const a=(()=>{if("1"===L){const e=H(),a=A.find((e=>"field_attachments"===e.fieldId));if(!ue(a)&&a.required&&0===e[a.name].length)return K(a.name,{type:"required",message:t("global.validate.required",{label:a.label??""})}),ne(!1),!0}return!1})();O((async e=>{if(!a){ne(!0);try{if("1"===L){const t=A.filter((e=>!!e.custom)),a=t.map((t=>({fieldName:W.decode(t.name),fieldValue:e[t.name]||t.default}))),o=await oe({extraFields:a});if(200!==o.code){const e=o.data?.errMsg||o.message||"",a=e.split(":");if(a.length>=2){const e=t.find((e=>W.decode(e.name)===a[0]));if(e)return K(e.name,{type:"manual",message:a[1]}),void ne(!1)}return E(e),void ne(!1)}E("")}se(),ne(!1),r()}catch(t){ne(!1)}}}))(e)},activeStep:l})]})}e("default",(function(e){const{setOpenPage:t}=e,[n,i]=g.useState(0),s=h(),[r]=v(),l=me(),c=C(M),{state:{isCheckout:d,isCloseGotoBCHome:u,logo:m,storeName:f,registerEnabled:w}}=g.useContext(b),{state:{isLoading:I,accountType:F,contactInformation:S=[],passwordInformation:_=[],bcPasswordInformation:k=[],bcContactInformation:O=[]},dispatch:H}=g.useContext(x),{state:{accountLoginRegistration:W,portalStyle:{backgroundColor:q="#FEF9F5"}}}=g.useContext(j);g.useEffect((()=>{w||l("/login")}),[w]),g.useEffect((()=>{(async()=>{try{H&&(H({type:"loading",payload:{isLoading:!0}}),H({type:"finishInfo",payload:{submitSuccess:!1}}));const e=xe.map((e=>L(e))),t=await Promise.all(e),a=(t[1]?.accountFormFields||[]).map((e=>{const t=e;return G.includes(e?.fieldId||"")&&4===e.groupId&&(t.isRequired=!0,t.visible=!0),e})),o=K(t[0]?.accountFormFields||[]),n=K(a||[]),{countries:i}=await A(),r=n.address?.map((e=>{const t=e;return"country"===e.name&&(t.options=i,t.replaceOptions={label:"countryName",value:"countryName"}),e}))||[],l=o.address?.map((e=>{const t=e;if("country"===e.name){t.options=i;const a=i.find((t=>t.countryName===e.default));t.default=a?.countryCode||e.default}return e}))||[],{b2b:c,b2c:d}=W;H&&H({type:"all",payload:{accountType:d&&!c?"2":"1",isLoading:!1,storeName:f,contactInformation:[...n.contactInformation||[]],bcContactInformation:[...o.contactInformation||[]],additionalInformation:[...n.additionalInformation||[]],bcAdditionalInformation:[...o.additionalInformation||[]],companyExtraFields:[],companyInformation:[...n?.businessDetails||[]],companyAttachment:[...U(s)],addressBasicFields:[...r],bcAddressBasicFields:[...l],countryList:[...i],passwordInformation:[...n.password||[]],bcPasswordInformation:[...o.password||[]]}})}catch(e){R.error(e)}})()}),[]);const $=()=>({emailAddress:("1"===F?S:O).find((e=>"email"===e.name))?.default||"",password:("1"===F?_:k).find((e=>"password"===e.name))?.default||""}),D=()=>{H&&H({type:"all",payload:{accountType:"",isLoading:!1,storeName:"",submitSuccess:!1,contactInformation:[],additionalInformation:[],companyExtraFields:[],companyInformation:[],companyAttachment:[],addressBasicFields:[],addressExtraFields:[],countryList:[],passwordInformation:[]}})};return g.useEffect((()=>{c?.body.scrollIntoView(!0)}),[n]),T(!1),a.jsx(y,{setOpenPage:t,children:a.jsx(ie,{isMobile:r,children:a.jsx(E,{isSpinning:I,tip:s("global.tips.loading"),transparency:"0",children:a.jsxs(o,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center"},children:[m&&a.jsx(se,{children:a.jsx(p,{sx:{maxWidth:"250px"},onClick:()=>{window.location.href="/"},children:a.jsx("img",{src:`${m}`,alt:s("global.tips.registerLogo"),loading:"lazy"})})}),a.jsx(ye,{activeStep:n,isStepOptional:e=>-1===e,backgroundColor:q,children:a.jsx(he,{activeStep:n,handleBack:()=>{i((e=>e-1))},handleNext:async()=>{i((e=>e+1))},handleFinish:async()=>{H({type:"loading",payload:{isLoading:!0}});const e=$();if(d)try{await z(e),window.location.reload()}catch(t){R.error(t)}else try{const t={email:e.emailAddress,pass:e.password},{data:a}=await P(t);if(a?.login?.customer&&B.set("loginCustomer",{emailAddress:a.login.customer.email,phoneNumber:a.login.customer.phone,...a.login.customer}),await N(),D(),!V(l))return;u?window.location.href="/":l("/orders")}catch(t){R.error(t)}H({type:"loading",payload:{isLoading:!1}})}})})]})})})})}));const ge=D(o)({"& #b3-customForm-id-name":{'& label[data-shrink="true"]':{whiteSpace:"break-spaces",transition:"unset",background:"white"},'& label[data-shrink="false"]':{whiteSpace:"break-spaces",color:"#474747",fontFamily:"Montserrat",fontSize:"0.9375rem",fontStyle:"normal",fontWeight:400,lineHeight:"normal",top:"-4px",background:"white"}}});function he(e){const{activeStep:o,handleBack:n,handleNext:i,handleFinish:s}=e;return a.jsx(ge,{component:"div",children:(e=>{switch(e){case 0:return a.jsx(fe,{activeStep:o,handleBack:n,handleNext:i});case 1:return a.jsx(pe,{activeStep:o,handleBack:n,handleNext:i});case 2:return a.jsx(t,{activeStep:o,handleBack:n,handleNext:i});case 3:return a.jsx(ne,{activeStep:o,handleFinish:s});default:return null}})(o)})}function ye(e){const{children:t,isStepOptional:n,activeStep:s,backgroundColor:r}=e,l=h(),[c]=v(),p=d(),{state:y}=g.useContext(x),{accountType:b,submitSuccess:j,isAutoApproval:I}=y,F=B.get("blockPendingAccountOrderCreation")&&!I,S=l(F?"register.title.registerCompleteWarning":"register.title.registerComplete"),_="1"===b?S:l("register.title.accountCreated"),C=w(r);return g.useEffect((()=>{j&&(console.log("User registered"),console.log(j),window.parent.postMessage({method:"postMessageB2BRegister",data:{type:"TRACK_COMPLETE_REGISTRATION"}},"*"))}),[j]),a.jsxs(o,{component:"div",sx:{borderRadius:"4px",marginTop:"3px",background:"#FFFFFF",width:"100%",padding:c?"0 20px":"0 20%"},children:[a.jsx(o,{component:"h3",sx:{color:"#474747",fontFamily:"Montserrat",fontStyle:"normal",fontWeight:400,lineHeight:"normal",fontSize:c?"1.625rem":"2.5rem",textAlign:c?"center":"center "},children:j?_:l("register.title.accountRegister")}),!j&&a.jsx(u,{activeStep:s,sx:{display:"none","& .MuiSvgIcon-root:not(.Mui-active) .MuiStepIcon-text":{fill:w(C)},"& .MuiSvgIcon-root.Mui-active .MuiStepIcon-text":{fill:w(p.palette.primary.main)}},children:$.map(((e,t)=>{const o={};return n(t)&&(o.optional=a.jsx(i,{variant:"caption",children:l("register.step.optional")})),a.jsx(m,{children:a.jsx(f,{...o,children:l(e)})},e)}))}),t]})}const xe=[1,2]}}}));
