import{j as l,B as h,g as J,o as Q,y as U,q as _,a8 as W,e as X}from"./mui-CyG7s_nf.js";import{r as t}from"./reactVendor-BAhb8EbJ.js";import{u as Z}from"./form-Bvi8lP6x.js";import{u as k}from"./lang-DxTEvHWx.js";import{a as I,G as P,by as ee,r as le,C as oe,k as te,h as q,_ as se,a3 as ae}from"./react-setup-9NPp_6Sq.js";import"../index.CMPJ-jXT.js";import{s as ne,L as ue,A as re,D as ie,B as fe}from"./B3CustomForm-BEMu6QY4.js";import{g as ce,s as de}from"./dateFns-BB2kaHor.js";const A=(e=0,o="yyyy-MM-dd")=>ce(de(new Date,e),o);function H({onChange:e,variant:o,value:r,label:f,disableOpenPicker:b=!0,formatInput:C="YYYY-MM-DD",size:y="small"}){const n=t.useRef(null),c=t.useRef(null),[m]=I(),{state:{bcLanguage:d}}=t.useContext(P),V=ne(d||"en"),[p,j]=t.useState(!1),x=()=>{var s;j(!p),n&&(n!=null&&n.current)&&((s=n.current)!=null&&s.blur)&&n.current.blur()},u=s=>{if(typeof s!="string"){const v=ee(s).format(C);e(v)}else e(s)};return l.jsxs(l.Fragment,{children:[l.jsx(h,{ref:c}),l.jsx(ue,{dateAdapter:re,adapterLocale:V,children:l.jsx(ie,{label:f,DialogProps:{container:c.current},onChange:s=>s&&u(s),onClose:()=>{j(!1)},value:r||null,open:p,inputRef:n,disableOpenPicker:b,renderInput:s=>l.jsx(J,{...s,size:y,onClick:()=>{m||x()},onTouchEnd:()=>{m&&(p||x())},variant:o})})})]})}var M={},xe=Q;Object.defineProperty(M,"__esModule",{value:!0});var E=M.default=void 0,me=xe(le()),he=l;E=M.default=(0,me.default)((0,he.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");function pe({startPicker:e,endPicker:o,handleChange:r,isMonthlySpacing:f=!1,xs:b={},customWidth:C},y){const[n,c]=t.useState((e==null?void 0:e.defaultValue)||""),[m,d]=t.useState((o==null?void 0:o.defaultValue)||""),V=()=>{c(f?A(30):""),d(f?A():"")};t.useEffect(()=>{c((e==null?void 0:e.defaultValue)||"")},[e==null?void 0:e.defaultValue]),t.useEffect(()=>{d((o==null?void 0:o.defaultValue)||"")},[o==null?void 0:o.defaultValue]);const p=()=>{const u={startValue:n,endValue:m};return e!=null&&e.isEnabled?u:{}};t.useImperativeHandle(y,()=>({setClearPickerValue:V,getPickerValue:p}));const j=u=>{c(u),r&&r((e==null?void 0:e.pickerKey)||"start",u)},x=u=>{d(u),r&&r((o==null?void 0:o.pickerKey)||"end",u)};return l.jsxs(h,{sx:{display:"flex",width:C||"auto"},children:[(e==null?void 0:e.isEnabled)&&l.jsx(h,{sx:{width:"49%",mt:"16px",mr:"1%",cursor:"pointer","& > .MuiFormControl-root":{width:"100%"},...b},children:l.jsx(H,{onChange:j,value:n,label:e==null?void 0:e.label,variant:"outlined"})}),(o==null?void 0:o.isEnabled)&&l.jsx(h,{sx:{width:"49%",mt:"16px",ml:"1%","& > .MuiFormControl-root":{width:"100%"},cursor:"pointer",...b},children:l.jsx(H,{onChange:x,value:m,label:o==null?void 0:o.label,variant:"outlined"})})]})}const ge=t.forwardRef(pe);function De({startPicker:e,endPicker:o,fiterMoreInfo:r,onChange:f,isShowMore:b=!1,resetFilterInfo:C}){const{state:{portalStyle:{backgroundColor:y="#FEF9F5"}}}=t.useContext(oe),n=te(y),[c,m]=t.useState(!1),[d,V]=t.useState(!1),[p,j]=t.useState(0),[x,u]=t.useState(null),s=t.useRef(null),{control:v,handleSubmit:T,getValues:S,formState:{errors:Y},setValue:D}=Z({mode:"onSubmit"}),[L]=I(),B=k(),G=U().palette.primary.main;t.useEffect(()=>{x&&Object.keys(x).forEach(a=>{D(a,x[a])})},[x,c]);const K=()=>{m(!0)},R=()=>{m(!1)},z=a=>{if(a){const i=[],F=Object.keys(a).every(g=>a[g]==="");Object.keys(a).forEach(g=>{a[g]!==""&&i.push(g)}),V(!F),j(i.length)}},N=a=>{T(i=>{var g;const F=(g=s.current)==null?void 0:g.getPickerValue();if(f){const w={...F,...i};z(w),f(w),u({...i})}R()})(a)},O=()=>{var a;Object.keys(S()).forEach(i=>{D(i,"")}),C&&C(),(a=s.current)==null||a.setClearPickerValue()},$=()=>{const a=e!=null&&e.isEnabled?{startValue:"",endValue:""}:{};O();const i=S();if(f){const F={...a,...i};z(F),f(F),u({...i})}};return l.jsxs(h,{sx:{ml:3,cursor:"pointer"},children:[(r&&r.length||b)&&l.jsxs(h,{sx:{display:"flex",alignItems:"center"},children:[l.jsxs(h,{onClick:K,children:[!d&&l.jsx(_,{"aria-label":"edit",size:"medium",sx:{color:n,":hover":{backgroundColor:q("#FFFFFF",.1)}},children:l.jsx(E,{})}),d&&l.jsx(_,{"aria-label":"edit",size:"medium",sx:{color:n,":hover":{backgroundColor:q("#FFFFFF",.1)}},children:l.jsx(W,{badgeContent:p,sx:{"& .MuiBadge-badge.MuiBadge-standard.MuiBadge-anchorOriginTopRight":{bgcolor:G,borderRadius:"50%"}},children:l.jsx(E,{})})})]}),d&&!L&&l.jsx(X,{"aria-label":"clear-edit",size:"small",sx:{marginLeft:"5px",color:"#1976D2"},onClick:$,children:B("global.filter.clearFilters")})]}),l.jsxs(se,{isOpen:c,leftSizeBtn:B("global.filter.cancel"),rightSizeBtn:B("global.filter.apply"),title:B("global.filter.title"),handleLeftClick:R,handRightClick:N,children:[l.jsxs(h,{sx:{width:"".concat(L?"100%":"450px")},children:[l.jsx(fe,{formFields:r,errors:Y,control:v,getValues:S,setValue:D}),l.jsx(ge,{ref:s,startPicker:e,endPicker:o})]}),l.jsx(ae,{sx:{mt:1},onClick:O,size:"small",children:B("global.filter.clearFilters")})]})]})}export{De as B,ge as a,A as d};
